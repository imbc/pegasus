language: wing

tasks:
  build:
    command: wing compile --platform tf-aws main.w
    outputs:
      - target
  test:
    command: wing test
  sim:
    command: wing it main.w
  terraform:
    command: terraform -chdir=./target/main.tfaws init
  plan:
    command: terraform -chdir=./target/main.tfaws plan
  apply:
    command: terraform -chdir=./target/main.tfaws apply
  destroy:
    command: terraform -chdir=./target/main.tfaws destroy